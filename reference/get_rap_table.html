<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Query RAP Tabular Data — get_rap_table • rapr</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Query RAP Tabular Data — get_rap_table"><meta name="description" content='Retrieves remotely sensed production or cover estimates from the Rangeland
Analysis Platform (RAP) using the tabular data API endpoints. This function
supports querying one or more spatial features (points, lines, or polygons)
provided as a terra SpatVector object, or any spatial object that can be
converted with terra::vect(). See Details for the products available.
get_rap_production16day_table() is depreciated, please use
get_rap_table(product="production16day") instead.'><meta property="og:description" content='Retrieves remotely sensed production or cover estimates from the Rangeland
Analysis Platform (RAP) using the tabular data API endpoints. This function
supports querying one or more spatial features (points, lines, or polygons)
provided as a terra SpatVector object, or any spatial object that can be
converted with terra::vect(). See Details for the products available.
get_rap_production16day_table() is depreciated, please use
get_rap_table(product="production16day") instead.'></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">rapr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.3</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/demo.html">Accessing 'Rangeland Analysis Platform' (RAP) Products with R</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/brownag/rapr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Query RAP Tabular Data</h1>
      <small class="dont-index">Source: <a href="https://github.com/brownag/rapr/blob/main/R/get_rap_table.R" class="external-link"><code>R/get_rap_table.R</code></a></small>
      <div class="d-none name"><code>get_rap_table.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Retrieves remotely sensed production or cover estimates from the Rangeland
Analysis Platform (RAP) using the tabular data API endpoints. This function
supports querying one or more spatial features (points, lines, or polygons)
provided as a <code>terra</code> <code>SpatVector</code> object, or any spatial object that can be
converted with <code><a href="https://rspatial.github.io/terra/reference/vect.html" class="external-link">terra::vect()</a></code>. See Details for the products available.</p>
<p><code>get_rap_production16day_table()</code> is depreciated, please use
<code>get_rap_table(product="production16day")</code> instead.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">get_rap_table</span><span class="op">(</span></span>
<span>  <span class="va">aoi</span>,</span>
<span>  years <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">product</span>,</span>
<span>  version <span class="op">=</span> <span class="st">"V3"</span>,</span>
<span>  mask <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  nodata_flag <span class="op">=</span> <span class="cn">NA_real_</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">get_rap_production16day_table</span><span class="op">(</span></span>
<span>  <span class="va">aoi</span>,</span>
<span>  years <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  mask <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  nodata_flag <span class="op">=</span> <span class="cn">NA_real_</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-aoi">aoi<a class="anchor" aria-label="anchor" href="#arg-aoi"></a></dt>
<dd><p>Area of Interest. A <code>SpatVector</code> object, or any spatial object
that can be converted with <code><a href="https://rspatial.github.io/terra/reference/vect.html" class="external-link">terra::vect()</a></code>. The AOI coordinates will be
transformed to WGS84 longitude latitude (<code>"EPSG:4326"</code>). The AOI can be
specified using point, line and polygon geometries. Each unique feature
will be passed separately to the API. The result <code>feature</code> column contains
the row index of the input feature from <code>aoi</code>.</p></dd>


<dt id="arg-years">years<a class="anchor" aria-label="anchor" href="#arg-years"></a></dt>
<dd><p>integer. Optional. Numeric year or vector of years (1986 to last
full year). Default: <code>NULL</code> returns all available years.</p></dd>


<dt id="arg-product">product<a class="anchor" aria-label="anchor" href="#arg-product"></a></dt>
<dd><p>Target data: <code>"cover"</code>, <code>"coverMeteorology"</code>,
<code>"production"</code>, or <code>"production16day"</code>.</p></dd>


<dt id="arg-version">version<a class="anchor" aria-label="anchor" href="#arg-version"></a></dt>
<dd><p>Target version: <code>"V3"</code>.</p></dd>


<dt id="arg-mask">mask<a class="anchor" aria-label="anchor" href="#arg-mask"></a></dt>
<dd><p>logical. Exclude cropland, development, and water? Default:
<code>TRUE</code>.</p></dd>


<dt id="arg-nodata-flag">nodata_flag<a class="anchor" aria-label="anchor" href="#arg-nodata-flag"></a></dt>
<dd><p>numeric. Value to use for missing data. The API encodes
"NODATA" as <code>-99</code>. Default: <code>NA_real_</code> replaces <code>-99</code> with <code>NA</code>.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>allows backward compatibility with <code>year</code> argument in depreciated
version of <code>get_rap_production16day_table()</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <em>data.frame</em> with requested time-series data by year or 16-day
production period. In addition to the columns described in Details above, all
products include columns for <code>"year"</code> (production estimate year) and
<code>"feature"</code> (feature ID, row number from <code>aoi</code>). Units are <strong>% cover</strong> for
fractional cover and <strong>lbs / acre</strong> for production.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>For each feature - year combination, a separate request is made to the RAP
API, and results are returned as a combined <code>data.frame</code>. In the special case
of (<code>years=NULL</code>) default, all available years are returned in a single query.</p>
<p>For more information on the API and data products, see the RAP API
documentation: <a href="https://rangelands.app/support/71-api-documentation" class="external-link">https://rangelands.app/support/71-api-documentation</a></p><div class="section">
<h3 id="products-overview">Products Overview<a class="anchor" aria-label="anchor" href="#products-overview"></a></h3>


<p>You can query several Landsat derived biomass, cover, and meteorological
products from 1986 to present:</p><ul><li><p><code>"cover"</code> – yearly fractional cover, including:</p><ul><li><p><code>"AFG"</code> (Annual Forb and Grass cover)</p></li>
<li><p><code>"PFG"</code> (Perennial Forb and Grass cover)</p></li>
<li><p><code>"SHR"</code> (Shrub cover)</p></li>
<li><p><code>"TRE"</code> (Tree cover)</p></li>
<li><p><code>"LTR"</code> (Litter cover)</p></li>
<li><p><code>"BGR"</code> (Bare Ground cover)</p></li>
</ul></li>
<li><p><code>"coverMeteorology"</code> – the same data provided by <code>"cover"</code> above, plus:</p><ul><li><p><code>"annualTemp"</code> (Annual average temperature in degrees Fahrenheit)</p></li>
<li><p><code>"annualPrecip"</code> (Annual total precipitation in inches)</p></li>
</ul></li>
<li><p><code>"production"</code> – annual production, including:</p><ul><li><p><code>"AFG"</code> (Annual Forb and Grass production)</p></li>
<li><p><code>"PFG"</code> (Perennial Forb and Grass production)</p></li>
<li><p><code>"HER"</code> (Herbaceous production)</p></li>
</ul></li>
<li><p><code>"production16day"</code> – 16-day production, including:</p><ul><li><p><code>"date"</code> (production estimate date)</p></li>
<li><p><code>"doy"</code> (production estimate Julian day of year)</p></li>
<li><p><code>"AFG"</code> (Annual Forb and Grass production)</p></li>
<li><p><code>"PFG"</code> (Perennial Forb and Grass production)</p></li>
<li><p><code>"HER"</code> (Herbaceous production)</p></li>
</ul></li>
</ul></div>

    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">aoi</span> <span class="op">&lt;-</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/vect.html" class="external-link">vect</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>x <span class="op">=</span> <span class="op">-</span><span class="fl">119.72330</span>, y <span class="op">=</span> <span class="fl">36.92204</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   geom <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'x'</span>, <span class="st">'y'</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   crs <span class="op">=</span> <span class="st">"EPSG:4326"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># all years (years=NULL) fractional cover data</span></span></span>
<span class="r-in"><span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu">get_rap_table</span><span class="op">(</span><span class="va">aoi</span>, product<span class="op">=</span><span class="st">"cover"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 'data.frame':	40 obs. of  8 variables:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ year   : num  1986 1987 1988 1989 1990 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ AFG    : num  68 77 78 71 71 71 57 61 65 65 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ PFG    : num  4 2 9 11 13 18 14 3 13 10 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ SHR    : num  3 2 3 3 0 0 1 3 2 5 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ TRE    : num  1 0 0 1 0 0 1 1 1 0 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ LTR    : num  16 17 13 12 15 10 19 19 14 13 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ BGR    : num  6 5 0 2 2 1 9 8 3 4 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ feature: num  1 1 1 1 1 1 1 1 1 1 ...</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># specific year fractional cover and meteorological data </span></span></span>
<span class="r-in"><span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu">get_rap_table</span><span class="op">(</span><span class="va">aoi</span>, years <span class="op">=</span> <span class="fl">1992</span>, product<span class="op">=</span><span class="st">"coverMeteorology"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 'data.frame':	1 obs. of  10 variables:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ year        : num 1992</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ AFG         : num 57</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ PFG         : num 14</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ SHR         : num 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ TRE         : num 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ LTR         : num 19</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ BGR         : num 9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ annualTemp  : num 64.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ annualPrecip: num 14.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ feature     : num 1</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># multiple specific years above-ground production (annual)</span></span></span>
<span class="r-in"><span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu">get_rap_table</span><span class="op">(</span><span class="va">aoi</span>, years <span class="op">=</span> <span class="fl">1993</span><span class="op">:</span><span class="fl">2003</span>, product<span class="op">=</span><span class="st">"production"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 'data.frame':	11 obs. of  5 variables:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ year   : num  1993 1994 1995 1996 1997 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ AFG    : num  1723 1631 1898 1829 791 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ PFG    : num  75.6 252.5 321.4 83.4 0 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ HER    : num  1799 1884 2220 1912 791 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ feature: num  1 1 1 1 1 1 1 1 1 1 ...</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># 1 kilometer buffer around point, above-ground production (16 days) in 2004</span></span></span>
<span class="r-in"><span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu">get_rap_table</span><span class="op">(</span><span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/buffer.html" class="external-link">buffer</a></span><span class="op">(</span><span class="va">aoi</span>, <span class="fl">1000</span><span class="op">)</span>, years <span class="op">=</span> <span class="fl">2004</span>, product<span class="op">=</span><span class="st">"production16day"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 'data.frame':	23 obs. of  7 variables:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ date   : chr  "2004-01-16" "2004-02-01" "2004-02-17" "2004-03-04" ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ year   : num  2004 2004 2004 2004 2004 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ doy    : num  16 32 48 64 80 96 112 128 144 160 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ AFG    : num  48.1 62.9 102.8 124.2 233.4 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ PFG    : num  2.46 2.96 4.75 5.48 10.99 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ HER    : num  50.5 65.9 107.6 129.7 244.3 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ feature: num  1 1 1 1 1 1 1 1 1 1 ...</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Andrew Brown.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

