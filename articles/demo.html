<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Accessing Rangeland Analysis Platform (RAP) Gridded Products with R • rapr</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Accessing Rangeland Analysis Platform (RAP) Gridded Products with R">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">rapr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/demo.html">Accessing Rangeland Analysis Platform (RAP) Gridded Products with R</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/brownag/rapr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">



<link href="demo_files/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="demo_files/htmlwidgets-1.6.4/htmlwidgets.js"></script><link href="demo_files/leaflet-1.3.1/leaflet.css" rel="stylesheet">
<script src="demo_files/leaflet-1.3.1/leaflet.js"></script><link href="demo_files/leafletfix-1.0.0/leafletfix.css" rel="stylesheet">
<script src="demo_files/proj4-2.6.2/proj4.min.js"></script><script src="demo_files/Proj4Leaflet-1.0.1/proj4leaflet.js"></script><link href="demo_files/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet">
<script src="demo_files/leaflet-binding-2.2.2/leaflet.js"></script><script src="demo_files/leaflet-providers-2.0.0/leaflet-providers_2.0.0.js"></script><script src="demo_files/leaflet-providers-plugin-2.2.2/leaflet-providers-plugin.js"></script><link href="demo_files/HomeButton-0.0.1/home-button.css" rel="stylesheet">
<script src="demo_files/HomeButton-0.0.1/home-button.js"></script><script src="demo_files/HomeButton-0.0.1/easy-button-src.min.js"></script><script src="demo_files/clipboard-0.0.1/setClipboardText.js"></script><link href="demo_files/mapviewCSS-0.0.1/mapview-popup.css" rel="stylesheet">
<link href="demo_files/mapviewCSS-0.0.1/mapview.css" rel="stylesheet">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Accessing Rangeland Analysis Platform (RAP) Gridded Products with R</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/brownag/rapr/blob/main/vignettes/demo.Rmd" class="external-link"><code>vignettes/demo.Rmd</code></a></small>
      <div class="d-none name"><code>demo.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/brownag/rapr" class="external-link">rapr</a></span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ncss-tech/soilDB/" class="external-link">soilDB</a></span><span class="op">)</span>  <span class="co"># get soil mapunit polygons</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span>      <span class="co"># spatial data handling</span></span>
<span><span class="co">#&gt; Linking to GEOS 3.12.1, GDAL 3.8.4, PROJ 9.4.0; sf_use_s2() is TRUE</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/r-spatial/mapview" class="external-link">mapview</a></span>, warn.conflicts <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="co"># interactive maps</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-rust.r-universe.dev/gifski" class="external-link">gifski</a></span><span class="op">)</span>  <span class="co"># create GIF from results</span></span></code></pre></div>
<p>First we buffer 100m around a longitude/latitude coordinate (WGS84
decimal degrees) using the {sf} package.</p>
<p>You could change the coordinates to where you live or your favorite
range spot!</p>
<p>You can change the buffering distance to include larger areas or
remove it altogether to make sure you get just a single polygon.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_unary.html" class="external-link">st_buffer</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>x <span class="op">=</span> <span class="op">-</span><span class="fl">120.26021</span>, y <span class="op">=</span> <span class="fl">37.99765</span><span class="op">)</span>,</span>
<span>  coords <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="st">"y"</span><span class="op">)</span>,</span>
<span>  crs <span class="op">=</span> <span class="fl">4326</span></span>
<span><span class="op">)</span>, <span class="fl">100</span><span class="op">)</span></span></code></pre></div>
<p>We use {soilDB} to retrieve SSURGO mapunit polygons for our area of
interest.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="http://ncss-tech.github.io/soilDB/reference/SDA_spatialQuery.html" class="external-link">SDA_spatialQuery</a></span><span class="op">(</span><span class="va">x</span>, what <span class="op">=</span> <span class="st">"mupolygon"</span><span class="op">)</span></span></code></pre></div>
<p>In this example the target polygon has a significant Urban land
component associated with the highway and adjacent development. How much
of the polygon is reflecting inter-annual variation in plant cover?</p>
<p>There are several housing developments and some areas have been
cleared for grazing. The natural condition is closed canopy mixed
oak/conifer woodland.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/mapview/man/mapView.html" class="external-link">mapview</a></span><span class="op">(</span><span class="va">p</span>, map.types <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Esri.WorldImagery"</span>, <span class="st">"OpenStreetMap"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="leaflet html-widget html-fill-item" id="htmlwidget-ac96cb3ee4656e2e9ec3" style="width:672px;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-ac96cb3ee4656e2e9ec3">{"x":{"options":{"minZoom":1,"maxZoom":52,"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"preferCanvas":false,"bounceAtZoomLimits":false,"maxBounds":[[[-90,-370]],[[90,370]]]},"calls":[{"method":"addProviderTiles","args":["Esri.WorldImagery","Esri.WorldImagery","Esri.WorldImagery",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["OpenStreetMap","OpenStreetMap","OpenStreetMap",{"errorTileUrl":"","noWrap":false,"detectRetina":false,"pane":"tilePane"}]},{"method":"createMapPane","args":["polygon",420]},{"method":"addPolygons","args":[[[[{"lng":[-120.289195334105,-120.288783064293,-120.288544132224,-120.288404579807,-120.287932540058,-120.287774217055,-120.287659070177,-120.287346394193,-120.287116052376,-120.287018053593,-120.286788304215,-120.286797300103,-120.286727873618,-120.286595085006,-120.286417311287,-120.286289675245,-120.285966152527,-120.284301026005,-120.284172316198,-120.283371884189,-120.282858218584,-120.282176066174,-120.281866593771,-120.281708834879,-120.281332176171,-120.281039004303,-120.280881591887,-120.280679256325,-120.280480503867,-120.280112411729,-120.279626712713,-120.278847783384,-120.27848140338,-120.278184974832,-120.277496486834,-120.277053206862,-120.276955803519,-120.276891541694,-120.276535580934,-120.275653575129,-120.2744157405,-120.273980438894,-120.273257562613,-120.272325908116,-120.271968830669,-120.27176800766,-120.271444137428,-120.271539891302,-120.271649428651,-120.27185947215,-120.271865088385,-120.27213531352,-120.272393689162,-120.272821391944,-120.273004056483,-120.273213016824,-120.273900220279,-120.274058826991,-120.274080018202,-120.274318431915,-120.274341068835,-120.274453846416,-120.274284729811,-120.274120702154,-120.273979714527,-120.273785884155,-120.273618978256,-120.273472761907,-120.273358352605,-120.273104618898,-120.272954090399,-120.272821595333,-120.272608376263,-120.272204697422,-120.271951451471,-120.27159006445,-120.271434417785,-120.271285561881,-120.271154039316,-120.27111183552,-120.271006266113,-120.271050108448,-120.269508466118,-120.269091745676,-120.268762841372,-120.268148107168,-120.267628402834,-120.267385968956,-120.267046497643,-120.266853741576,-120.265185832974,-120.264063003745,-120.262741034927,-120.262520066534,-120.262195914619,-120.261937098406,-120.261822495579,-120.26163258515,-120.261404099645,-120.261090816515,-120.26070684628,-120.260447668006,-120.260127344766,-120.259707766454,-120.259520826422,-120.25928579981,-120.259252911474,-120.259018290622,-120.258917487671,-120.25875100215,-120.258640954731,-120.258508257302,-120.258457310494,-120.258433982526,-120.258443246578,-120.258629439846,-120.258788126553,-120.258821734928,-120.258885479125,-120.258979068705,-120.259042522215,-120.259108915689,-120.259172368791,-120.259213739845,-120.259278834409,-120.259282596479,-120.25951755228,-120.259524785391,-120.259625894953,-120.25963365704,-120.259667263173,-120.259716729631,-120.259697059832,-120.259717300242,-120.259649124969,-120.259734269792,-120.259810590952,-120.259834115632,-120.259754177791,-120.259583603128,-120.259419094591,-120.258862375604,-120.258205460957,-120.257750382453,-120.257356201715,-120.256211587669,-120.255901857727,-120.255699884198,-120.255407568211,-120.25511225761,-120.254915418416,-120.254806644853,-120.254786524562,-120.2545459921,-120.254537330871,-120.254605417454,-120.254683333556,-120.254816527553,-120.255089932845,-120.255164216278,-120.255248806725,-120.255304033617,-120.255435967191,-120.255464208793,-120.255404373664,-120.255297870224,-120.255201768596,-120.254974213214,-120.254866752959,-120.254744099498,-120.254577929631,-120.254392734483,-120.254281350262,-120.25424136117,-120.254136996294,-120.254058108166,-120.253844657158,-120.25369050248,-120.253706941077,-120.253657304448,-120.25364960606,-120.253761168432,-120.253783070078,-120.253731100324,-120.253791155573,-120.253842885109,-120.253916676984,-120.254062005807,-120.254313738277,-120.255170690007,-120.255481180902,-120.255897055873,-120.256328309752,-120.256778074978,-120.257016436091,-120.257202591248,-120.257082234908,-120.257151326129,-120.257450119287,-120.257610764285,-120.257942797621,-120.258084581755,-120.258331547972,-120.258487028366,-120.258789874791,-120.258941109959,-120.259027443286,-120.259177820052,-120.259244288157,-120.259323762873,-120.259461651673,-120.259581353132,-120.260037129612,-120.260270781751,-120.26034923296,-120.260388413897,-120.260302681115,-120.260250315106,-120.260139022508,-120.260136949702,-120.260176611042,-120.260289154511,-120.260366919973,-120.260784859706,-120.261001506216,-120.261275439487,-120.261633774734,-120.261715880528,-120.261662262938,-120.261587191346,-120.261909709996,-120.262464078854,-120.26305071046,-120.263147140909,-120.263259150585,-120.263500803674,-120.263742955612,-120.263863438276,-120.263964741171,-120.264170915109,-120.264347174059,-120.264432641667,-120.264717278624,-120.265812573672,-120.266142619114,-120.266564299392,-120.267024435354,-120.267281678182,-120.267324066528,-120.267454065454,-120.267420840859,-120.267474130123,-120.267622748549,-120.267732952874,-120.268529609084,-120.269202008064,-120.269394617368,-120.269606178774,-120.269717246724,-120.270045106836,-120.270406639101,-120.270545319893,-120.270653591895,-120.271304673801,-120.271535175571,-120.27166935,-120.271811267478,-120.2718888235,-120.271917055839,-120.272125543574,-120.27252086801,-120.272948286907,-120.273082382057,-120.273474348293,-120.273947536462,-120.274209064377,-120.27456865173,-120.275260907651,-120.275626340336,-120.275995511745,-120.276406343004,-120.276071772087,-120.275374116545,-120.275132464597,-120.275043451812,-120.275065521285,-120.275126283669,-120.275143498305,-120.275231795889,-120.275517112026,-120.275578701917,-120.27571443485,-120.275893834467,-120.276354248655,-120.276536842601,-120.276847134328,-120.27697520686,-120.27719155926,-120.277408263864,-120.277529777207,-120.277653407695,-120.277683631625,-120.277783113255,-120.277984266936,-120.27825750279,-120.278510624854,-120.27867155067,-120.278821512258,-120.278936200072,-120.279036511799,-120.278997730823,-120.27904139616,-120.279138630309,-120.279374840576,-120.279553482161,-120.279784065127,-120.279971196569,-120.280068620977,-120.280077326318,-120.28005096435,-120.27998770961,-120.279983442829,-120.280010101048,-120.280058662959,-120.280124256127,-120.280352633754,-120.280651866878,-120.280977427616,-120.281096852711,-120.281154078398,-120.281163122876,-120.281084644184,-120.280828805713,-120.282081103105,-120.283340570123,-120.283557538996,-120.283851584067,-120.284308317328,-120.284668924402,-120.285246044033,-120.285669451161,-120.285849864726,-120.286097425793,-120.28684312117,-120.287230722091,-120.287372120347,-120.287618349629,-120.287796059503,-120.288280262465,-120.288424997618,-120.288603799308,-120.288710554713,-120.288883772441,-120.289022510962,-120.289195334105],"lat":[37.9856866537837,37.9858348211137,37.9859367654732,37.9860480626785,37.9867810059664,37.9871718325525,37.9873556394622,37.9876726426152,37.9878530676267,37.9879042946195,37.9876170681888,37.987520262345,37.9873563666515,37.9871665901857,37.9870514090501,37.9870145865718,37.9870064221753,37.9876539203184,37.9877021506196,37.9881549276483,37.988393711778,37.9887496467341,37.9889350367267,37.9891440724159,37.9895358087437,37.9899779330121,37.9903362823501,37.990589393875,37.9907366550667,37.99093853269,37.991041606899,37.9912336299194,37.9913770600092,37.9915800791854,37.9919455607617,37.9920935075182,37.9920865092897,37.9921179774465,37.9922076491516,37.9926971769383,37.9935981525296,37.9939464115754,37.9947642114926,37.9955053596598,37.9958248457741,37.9959448425616,37.9965572830132,37.9970431964166,37.9973511158721,37.9978341567898,37.9980238957912,37.9985445359955,37.9987227073836,37.9988850080803,37.9991559785307,37.9993709039855,37.9997111445695,37.9997481616925,37.9997687644346,37.9998098948861,37.9998136065117,38.0000710755418,38.0001440763119,38.0000980145579,38.0001062990434,38.0001870735636,38.0002172079202,38.0002099532668,38.000141848196,38.0001434711415,38.0002717183451,38.0005383164727,38.0006497587782,38.0004705999261,38.0003218172777,38.0001977130639,38.0001942110866,38.0002603353757,38.0003921054821,38.0004679709115,38.000705135086,38.0009590527342,38.0008868927297,38.0007537061014,38.0005354131515,38.0001915301707,38.0001972329426,38.0003348696654,38.000639700115,38.0010309913137,38.0020493753173,38.0025617433058,38.0037432958625,38.0039448054765,38.0043977342326,38.0047940908301,38.0050256925605,38.0052983642193,38.0057531215083,38.0062066093006,38.0065665270984,38.0072727698611,38.0076170286389,38.0080265672698,38.0081879814312,38.00831948321,38.0083630261392,38.0086724059593,38.0087260127251,38.0088528545611,38.0088613070383,38.008760008371,38.0086615196051,38.0085426851035,38.0083158226988,38.0079295752858,38.0077194813627,38.0076250785118,38.0075319498571,38.0074392320646,38.0073452400388,38.0071575227486,38.0070635306515,38.0067554776129,38.0066381010015,38.0065432871852,38.0058603953466,38.0056699043902,38.0053875583987,38.0051739082487,38.0050795051301,38.0037426149529,38.0034791952305,38.0028609910419,38.0022625366645,38.0015970709821,38.0011703665234,38.0005266004623,38.0002394253377,37.999972450562,37.999868377428,37.9997321629342,37.9997785227139,37.999842096294,37.9999560370362,38.00050962296,38.000726326329,38.0008677292564,38.0011574364127,38.0015583969594,38.0018988469475,38.0020241426608,38.0020420475516,38.0021147230599,38.0020500879115,38.0017366303302,38.0016397122965,38.0014209535225,38.0010926623812,38.0009319345075,38.0008548719268,38.0007081452416,38.0004997830299,38.0004212210106,38.0003457402024,38.0003682276783,38.0004393226329,38.0006707344342,38.0008953480272,38.0010252985147,38.0014499006612,38.0015740722946,38.0017340125074,38.0019790802012,38.0022906618075,38.0023140107505,38.0023046700025,38.0022031038024,38.0020328818138,38.0017580135609,38.0015548738585,38.0009855014728,38.0007643817283,38.0001857044693,37.9997706024057,37.9992105774775,37.9988434072739,37.9985724000565,37.9982927565772,37.9975374100639,37.9972947341144,37.997029794709,37.9967894011514,37.9964309196938,37.9960903517245,37.9955344470327,37.9946570322385,37.9944208201297,37.9939278554408,37.9937413345551,37.9934638559559,37.9933060499102,37.9930900578172,37.9930401264306,37.9930433350731,37.9930938474059,37.9931492059602,37.9933031648845,37.9934584431633,37.9935852688685,37.9936384840117,37.9936658761345,37.9936998869754,37.993783497403,37.9938330752188,37.9938859966909,37.9940020244566,37.9940900859198,37.9944021615058,37.9944560621055,37.9944821459885,37.9944953121509,37.9944721844641,37.9939873473995,37.9938401918398,37.9935348204295,37.993307326357,37.9932123176449,37.9929963452499,37.9929073560795,37.9928383376711,37.9927804444875,37.9927584291609,37.9927342843849,37.9927493997017,37.9929521772187,37.9932341533321,37.9935712060306,37.9937452455864,37.9940262112332,37.9941546370741,37.9942074019808,37.994308339461,37.9948342648916,37.9948900387209,37.9948756092176,37.9946717333985,37.994224955972,37.9938917884554,37.9934588031086,37.9932469968665,37.9927908251279,37.9925827475398,37.9925253786619,37.9924672365982,37.9923540440363,37.992287352536,37.9921993003286,37.9921233120989,37.9918088291378,37.991552068948,37.9914769388437,37.9914420887249,37.9912373022963,37.9911066787125,37.9910075631338,37.9907584180923,37.9903674011099,37.9903312498947,37.9903470911343,37.9904274219455,37.9904477645094,37.9907368734385,37.99120978188,37.9915850823348,37.9918538968505,37.99190919192,37.9919256461347,37.9918146937857,37.9916089258024,37.9913292412941,37.9913094547044,37.9911816018445,37.9910636771334,37.9908309018031,37.9904409823014,37.9902119682893,37.9902066348769,37.9901795169126,37.9901447396405,37.9900806171533,37.990035584965,37.9899826237682,37.9899068201502,37.9898633537373,37.9897580395571,37.9896619973224,37.9897647596743,37.9897697049541,37.9897247864453,37.9896508526764,37.9895147060353,37.9892630859991,37.9890664698864,37.9889428431809,37.9889606904333,37.9890470223119,37.9891678512978,37.98923681462,37.9893972167927,37.9897868406454,37.989902476393,37.9899795886705,37.9900248387089,37.9900190540141,37.9898957717445,37.9897139820903,37.989537468541,37.9892950268819,37.9890366411521,37.9887921897503,37.9886418249127,37.988428018274,37.9883287261745,37.9882518009343,37.9881925906122,37.9881568220881,37.9881710431857,37.9881164000317,37.9880393261663,37.9879249918105,37.9877094467854,37.9873057815256,37.9868471635821,37.9863428130451,37.9858755548515,37.9857255603316,37.98560712531,37.9856160720739,37.9856576501995,37.9855284468723,37.9855103034049,37.9854481115665,37.985196371081,37.9849361000179,37.9849396987788,37.9850253178102,37.9851156114302,37.9852129055061,37.9852158263963,37.9852634785394,37.9853229763314,37.985512850595,37.9856073584842,37.9856866537837]},{"lng":[-120.266817513309,-120.26703960379,-120.267141601672,-120.267582051771,-120.268565591451,-120.267980932052,-120.269045647261,-120.268341294354,-120.268593589125,-120.268168892458,-120.267809388124,-120.267296570373,-120.266240141884,-120.265553622872,-120.265147149528,-120.265160903064,-120.265503281696,-120.265793865389,-120.266119392435,-120.266283567988,-120.26642313325,-120.266370065339,-120.266133449515,-120.266034401657,-120.26609430925,-120.266118781825,-120.266187186905,-120.266348126055,-120.26671281866,-120.266817513309],"lat":[37.9994679972181,37.9996443078617,37.9998274280322,38.0001300890186,37.9992991860077,37.9988680661834,37.9979995000296,37.9975834136587,37.9972667310777,37.9970567830946,37.9970300334801,37.9972362839932,37.9977656667686,37.9981620095094,37.9983771339477,37.9984674793312,37.9984433036374,37.9984452953052,37.9985582356841,37.9986577581329,37.9987936174805,37.9989749563132,37.9991722706511,37.9994394578456,37.999582233892,37.9995772762008,37.9996464072756,37.9995243603496,37.9993333724664,37.9994679972181]},{"lng":[-120.264484676198,-120.264440823904,-120.264420383771,-120.264514044741,-120.264770579846,-120.264836322718,-120.264938969602,-120.265256129977,-120.265398634922,-120.265728507563,-120.265971596468,-120.266430131298,-120.266508804088,-120.266717951453,-120.266792294221,-120.266678066119,-120.266012567555,-120.265881031907,-120.265667515365,-120.265563242502,-120.265520160464,-120.265521964402,-120.265620893501,-120.26566390728,-120.265639497826,-120.265520008068,-120.265474517302,-120.26540580194,-120.265328960645,-120.265224592758,-120.264708539718,-120.264484676198],"lat":[37.9962697259241,37.9963477663219,37.9964459604586,37.9965901974534,37.9966322828589,37.9967111741517,37.9967973429658,37.9972033607847,37.9973091178239,37.9974138010184,37.9972004215808,37.9968963670522,37.9968158817048,37.9966711568382,37.9964753639959,37.9962947223462,37.9958209634913,37.9956595036753,37.9954768463501,37.9954776847361,37.9955297511339,37.9956022312343,37.9957232700639,37.9958122981538,37.9958845562171,37.9959779204752,37.9960793458218,37.9961329166478,37.9961835231247,37.9961982116914,37.9961828819829,37.9962697259241]},{"lng":[-120.264105653443,-120.263575373661,-120.263101950161,-120.262609072945,-120.2623977307,-120.262319209852,-120.262447697154,-120.263060160415,-120.263316418419,-120.263617982908,-120.264242575427,-120.264404041222,-120.264472742882,-120.264534938691,-120.264532527349,-120.264422041382,-120.264263701405,-120.264277143801,-120.2642154252,-120.264105653443],"lat":[37.9965982374789,37.9968338267748,37.9969629209561,37.9970341735745,37.997119398471,37.9972745384935,37.9974587486616,37.9975310941144,37.9976359412897,37.9976670642422,37.9976659463027,37.9975207426751,37.9973823430766,37.9971115578299,37.9968888998158,37.996779422229,37.9965523898328,37.9965358353689,37.9965077658787,37.9965982374789]}]]],null,"p",{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}},"pane":"polygon","stroke":true,"color":"#333333","weight":0.5,"opacity":0.9,"fill":true,"fillColor":"#6666FF","fillOpacity":0.6,"smoothFactor":1,"noClip":false},"<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\/td><th><b>Feature ID&emsp;<\/b><\/th><td>1&emsp;<\/td><\/tr><tr><td>1<\/td><th>mukey&emsp;<\/th><td>2403721&emsp;<\/td><\/tr><tr><td>2<\/td><th>area_ac&emsp;<\/th><td>421.3167&emsp;<\/td><\/tr><tr><td>3<\/td><th>geom&emsp;<\/th><td>sfc_POLYGON&emsp;<\/td><\/tr><\/table><\/div>",{"maxWidth":800,"minWidth":50,"autoPan":true,"keepInView":false,"closeButton":true,"closeOnClick":true,"className":""},"1",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},{"stroke":true,"weight":1,"opacity":0.9,"fillOpacity":0.84,"bringToFront":false,"sendToBack":false}]},{"method":"addScaleBar","args":[{"maxWidth":100,"metric":true,"imperial":true,"updateWhenIdle":true,"position":"bottomleft"}]},{"method":"addHomeButton","args":[-120.289195334105,37.9849361000179,-120.25364960606,38.0088613070383,true,"p","Zoom to p","<strong> p <\/strong>","bottomright"]},{"method":"addLayersControl","args":[["Esri.WorldImagery","OpenStreetMap"],"p",{"collapsed":true,"autoZIndex":true,"position":"topleft"}]},{"method":"addLegend","args":[{"colors":["#6666FF"],"labels":["p"],"na_color":null,"na_label":"NA","opacity":1,"position":"topright","type":"factor","title":"","extra":null,"layerId":null,"className":"info legend","group":"p"}]}],"limits":{"lat":[37.9849361000179,38.0088613070383],"lng":[-120.289195334105,-120.25364960606]},"fitBounds":[37.9849361000179,-120.289195334105,38.0088613070383,-120.25364960606,[]]},"evals":[],"jsHooks":{"render":[{"code":"function(el, x, data) {\n  return (\n      function(el, x, data) {\n      // get the leaflet map\n      var map = this; //HTMLWidgets.find('#' + el.id);\n      // we need a new div element because we have to handle\n      // the mouseover output separately\n      // debugger;\n      function addElement () {\n      // generate new div Element\n      var newDiv = $(document.createElement('div'));\n      // append at end of leaflet htmlwidget container\n      $(el).append(newDiv);\n      //provide ID and style\n      newDiv.addClass('lnlt');\n      newDiv.css({\n      'position': 'relative',\n      'bottomleft':  '0px',\n      'background-color': 'rgba(255, 255, 255, 0.7)',\n      'box-shadow': '0 0 2px #bbb',\n      'background-clip': 'padding-box',\n      'margin': '0',\n      'padding-left': '5px',\n      'color': '#333',\n      'font': '9px/1.5 \"Helvetica Neue\", Arial, Helvetica, sans-serif',\n      'z-index': '700',\n      });\n      return newDiv;\n      }\n\n\n      // check for already existing lnlt class to not duplicate\n      var lnlt = $(el).find('.lnlt');\n\n      if(!lnlt.length) {\n      lnlt = addElement();\n\n      // grab the special div we generated in the beginning\n      // and put the mousmove output there\n\n      map.on('mousemove', function (e) {\n      if (e.originalEvent.ctrlKey) {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                           ' lon: ' + (e.latlng.lng).toFixed(5) +\n                           ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                           ' | zoom: ' + map.getZoom() +\n                           ' | x: ' + L.CRS.EPSG3857.project(e.latlng).x.toFixed(0) +\n                           ' | y: ' + L.CRS.EPSG3857.project(e.latlng).y.toFixed(0) +\n                           ' | epsg: 3857 ' +\n                           ' | proj4: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs ');\n      } else {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                      ' | zoom: ' + map.getZoom() + ' ');\n      }\n      });\n\n      // remove the lnlt div when mouse leaves map\n      map.on('mouseout', function (e) {\n      var strip = document.querySelector('.lnlt');\n      if( strip !==null) strip.remove();\n      });\n\n      };\n\n      //$(el).keypress(67, function(e) {\n      map.on('preclick', function(e) {\n      if (e.originalEvent.ctrlKey) {\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\n      lnlt.text(\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\n                      ' | zoom: ' + map.getZoom() + ' ');\n      var txt = document.querySelector('.lnlt').textContent;\n      console.log(txt);\n      //txt.innerText.focus();\n      //txt.select();\n      setClipboardText('\"' + txt + '\"');\n      }\n      });\n\n      }\n      ).call(this.getMap(), el, x, data);\n}","data":null},{"code":"function(el, x, data) {\n  return (function(el,x,data){\n           var map = this;\n\n           map.on('keypress', function(e) {\n               console.log(e.originalEvent.code);\n               var key = e.originalEvent.code;\n               if (key === 'KeyE') {\n                   var bb = this.getBounds();\n                   var txt = JSON.stringify(bb);\n                   console.log(txt);\n\n                   setClipboardText('\\'' + txt + '\\'');\n               }\n           })\n        }).call(this.getMap(), el, x, data);\n}","data":null}]}}</script><p>Use {rapr} to download the Rangeland Analysis Platform
“vegetation-biomass” product for 1986 to 2021 using the mapunit polygon
<code>p</code> to define the target extent.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">rap</span> <span class="op">&lt;-</span> <span class="fu">rapr</span><span class="fu">::</span><span class="fu"><a href="../reference/get_rap.html">get_rap</a></span><span class="op">(</span><span class="va">p</span>, product <span class="op">=</span> <span class="st">"vegetation-biomass"</span>, <span class="fl">1986</span><span class="op">:</span><span class="fl">2021</span>, progress <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p>Now we will select just the
<code>"annual forb and grass biomass"</code> layers, iterate over them
and plot symbolizing with a common range <code>[0,5000]</code> pounds
per acre.</p>
<p>We write this iteration into a function called
<code>makeplot()</code> and use {gifski} to render an animated GIF file
from the R plot graphics output in each year for a total of 36
layers.</p>
<p>Pass the function <code>makeplot()</code> as the first argument to
<code><a href="https://r-rust.r-universe.dev/gifski/reference/gifski.html" class="external-link">gifski::save_gif()</a></code> and then specify the output file name
with <code>gif_file</code> argument.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">makeplot</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grep</a></span><span class="op">(</span><span class="st">"annual_forb_and_grass_biomass"</span>, <span class="fu"><a href="https://rspatial.github.io/terra/reference/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">rap</span><span class="op">)</span><span class="op">)</span>, <span class="kw">function</span><span class="op">(</span><span class="va">i</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">rap</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span>, </span>
<span>                main <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">gsub</a></span><span class="op">(</span><span class="st">".*_(\\d+)_v3$"</span>, <span class="st">"\\1"</span>, <span class="fu"><a href="https://rspatial.github.io/terra/reference/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">rap</span><span class="op">)</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span>, </span>
<span>                range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">5000</span><span class="op">)</span>, </span>
<span>                cex.main <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span>    <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/vect.html" class="external-link">vect</a></span><span class="op">(</span><span class="va">p</span><span class="op">)</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">gifski</span><span class="fu">::</span><span class="fu"><a href="https://r-rust.r-universe.dev/gifski/reference/gifski.html" class="external-link">save_gif</a></span><span class="op">(</span><span class="fu">makeplot</span><span class="op">(</span><span class="op">)</span>, gif_file <span class="op">=</span> <span class="st">"annual_forb_and_grass_biomass.gif"</span>, delay <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "/home/runner/work/rapr/rapr/vignettes/annual_forb_and_grass_biomass.gif"</span></span></code></pre></div>
<p><img src="annual_forb_and_grass_biomass.gif"></p>
  </main>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Andrew Brown.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
